/*
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   4.1.0+f046478d
*/
var fcdsc=function(){function l(){d("trackVisit");var a=new K;a.load(window.location.href);if(a.hasUtmData()){var c=E("_fcdscv"),b=new p;c?(b.load(c),b.addVisit(a),c=b.encode(),d("vienc.length: "+c.length),3500<c.length?b.save().then(function(a){d("Success! "+a.Message);b.resetAndSaveToCookie()},function(a){d("Failed!",a)}):(b.saveToCookie(),d("vi: "+b.toString()))):L().then(function(c){c=JSON.parse(c.Message);d("VisitorId:"+c.VisitorId);b.Visitor=new x(null,c.VisitorId);b.addVisit(a);b.saveToCookie()},
function(a){console.error("Failed!",a);b.DiagnosticMessage="Error creating new visitor";d("Error creating new visitor");m(b)})}else d("No UTM data in URL, exiting.")}function k(a){return new Promise(function(c,b){d("m_trackFormFill");var e=new p,g=E("_fcdscv");g?(e.load(g),e.Visitor.ExternalVisitorId?e.Visits&&0!==e.Visits.length||e.Visitor.Email!==a?(e.Visitor=new x(a,e.Visitor.ExternalVisitorId),e.Activities.push(new S("Form",a)),e.updateVisitsAfterForm(a),d("m_trackFormFill::vi: "+e.toString()),
e.save().then(function(a){d("m_trackFormFill::vi.save response::"+a.Message);e.resetAndSaveToCookie();c(a.Message)},function(a){d("m_trackFormFill::vi.save error::",a);b(a)})):(g="trackFormFill is not saving because there are no visits in the cookie and there is not a new value for email",e.DiagnosticMessage=g,d(g),u(e,c,b)):(g="trackFormFill cannot save because there is no visitor id",e.DiagnosticMessage=g,d(g),u(e,c,b))):(g="trackFormFill cannot save because cookie does not exist or value is blank",
e.DiagnosticMessage=g,d(g),u(e,c,b))})}function M(a){if(!a)return!1;a=a.split(".");a=a[a.length-2]+"."+a[a.length-1];d("topLevelOrigin: "+a);for(var c="jobvite.com,web.jobvite.com".toString().split(","),b=0;b<c.length;b++)if(a===c[b])return!0;return!1}function K(){this.ReferrerPageRaw=this.ReferrerPage=this.UtmContent=this.UtmTerm=this.UtmCampaign=this.UtmMedium=this.UtmSource=this.UrlPath=this.Email=this.Origin=this.VisitDateTime=null;this.load=function(a){this.VisitDateTime=F();this.UrlPath=
encodeURIComponent(window.location.pathname);this.Origin=encodeURIComponent(window.location.hostname);a=a.split("?");if(1<a.length){a=a[1].split("&");for(var c=0;c<a.length;c++){var b=a[c].split("=");"utm_source"==b[0]?this.UtmSource=b[1]:"utm_medium"==b[0]?this.UtmMedium=b[1]:"utm_campaign"==b[0]?this.UtmCampaign=b[1]:"utm_term"==b[0]?this.UtmTerm=b[1]:"utm_content"==b[0]&&(this.UtmContent=b[1])}}if(document.referrer){if(c=document.referrer,a=encodeURIComponent(c),this.ReferrerPageRaw=255<a.length?
a.substring(0,255):a,a=document.createElement("a"),a.href=c,a=a.hostname,b=encodeURIComponent(a),this.ReferrerPage=255<b.length?b.substring(0,255):b,!this.hasUtmData()){c=c.split("?");if(1<c.length)for(b=c[1].split("&"),c=0;c<b.length;c++){var e=b[c].split("=");if("q"==e[0]&&a.startsWith("www.bing.")){this.UtmTerm=e[1];break}}a.startsWith("www.bing.")?(this.UtmSource="bing",this.UtmMedium="organic"):a.startsWith("search.yahoo.")?(this.UtmSource="yahoo",this.UtmMedium="organic"):a.startsWith("www.google.")?
(this.UtmSource="google",this.UtmMedium="organic"):a.startsWith("www.facebook.")?(this.UtmSource="facebook",this.UtmMedium="social"):a.startsWith("www.linkedin.")||a.startsWith("www.lnkd.")?(this.UtmSource="linkedin",this.UtmMedium="social"):a.startsWith("www.twitter.")||a.startsWith("t.co")?(this.UtmSource="twitter",this.UtmMedium="social"):M(a)||(this.UtmSource="referral")}}else this.hasUtmData()||(this.UtmSource="direct")};this.loadFromJSON=function(a){this.VisitDateTime=a.VisitDateTime;this.UrlPath=
a.UrlPath;this.Origin=a.Origin;this.Email=a.Email;this.UtmSource=a.UtmSource;this.UtmMedium=a.UtmMedium;this.UtmCampaign=a.UtmCampaign;this.UtmTerm=a.UtmTerm;this.UtmContent=a.UtmContent;this.ReferrerPage=a.ReferrerPage;this.ReferrerPageRaw=a.ReferrerPageRaw};this.equals=function(a){return this.UtmSource==a.UtmSource&&this.UtmMedium==a.UtmMedium&&this.UtmCampaign==a.UtmCampaign&&this.UtmTerm==a.UtmTerm&&this.UtmContent==a.UtmContent};this.hasUtmData=function(){return null!==this.UtmSource||null!==
this.UtmMedium||null!==this.UtmCampaign||null!==this.UtmTerm||null!==this.UtmContent}}function x(a,c){this.Email=a;this.ExternalVisitorId=c}function p(){this.CustomerId="12b7ed4d-b2cc-4f7d-9855-4a05a2a26839";this.Visitor=null;this.Visits=[];this.Activities=[];this.DiagnosticMessage=null;this.load=function(a){a=JSON.parse(a);this.CustomerId=a.CustomerId;this.Visitor=a.Visitor;this.Activities=a.Activities;this.DiagnosticMessage=a.DiagnosticMessage;for(var c=0;c<a.Visits.length;c++){var b=new K;b.loadFromJSON(a.Visits[c]);
this.Visits.push(b)}};this.addActivity=function(a){this.Activities.push(a)};this.addVisit=function(a){if(0!==this.Visits.length)for(var c=0;c<this.Visits.length;c++)if(this.Visits[c].equals(a))return;this.Visits.push(a)};this.save=function(){var a=JSON.stringify(this);return N("https://st.fullcircleinsights.com/v1/visits/queue",a).then(JSON.parse)};this.toString=function(){return JSON.stringify(this)};this.encode=function(){return window.btoa(this.toString())};this.saveToCookie=function(){d("VisitInfo::saveToCookie");
var a=this.toString();z("_fcdscv",a,730);d("VisitInfo::saveToCookie::vi: "+a)};this.resetAndSaveToCookie=function(){d("VisitInfo::resetAndSaveToCookie");this.Visits=[];this.Activities=[];this.saveToCookie()};this.updateVisitsAfterForm=function(a){d("VisitInfo::updateVisitsAfterForm");0!==this.Visits.length&&(this.Visits[this.Visits.length-1].Email=a)}}function S(a,c){this.ActivityDateTime=F();this.Type=a;this.UrlPath=window.location.pathname;this.Email=c}function d(a){G&&console.log("FCDSC v1.0.25("+
window.location.hostname+"): "+a)}function u(a,c,b){a.save().then(function(a){d("sendDiagnostic::vi.save response::"+a.Message);c(a.Message)},function(a){d("sendDiagnostic::vi.save error::",a);b(a)})}function m(a){a.save().then(function(a){d("sendDiagnostic::vi.save response::"+a.Message)},function(a){d("sendDiagnostic::vi.save error::",a)})}function F(){var a=new Date,c=a.getUTCFullYear().toString()+"-",b=(a.getUTCMonth()+1).toString();1==b.length&&(b="0"+b);var e=a.getUTCDate().toString();1==e.length&&
(e="0"+e);var d=a.getUTCHours().toString();1==d.length&&(d="0"+d);var h=a.getUTCMinutes().toString();1==h.length&&(h="0"+h);a=a.getUTCSeconds().toString();1==a.length&&(a="0"+a);return c+(b+"-"+e+" "+d+":"+h+":"+a)}function N(a,c){return new Promise(function(b,e){d("post");var g=new XMLHttpRequest;g.open("POST",a);g.setRequestHeader("x-api-key","8XbUPgWodtflkrK2m3xR9H4sXspVAiV3vv0Q5pC8");g.onload=function(){d("post::Status: "+g.status);200==g.status?b(g.response):e(Error(g.statusText))};g.onerror=function(){e(Error("Network errors"))};
g.send(c)})}function E(a){a+="=";for(var c=decodeURIComponent(document.cookie).split(";"),b=0;b<c.length;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1);if(0===d.indexOf(a))return window.atob(d.substring(a.length,d.length))}return""}function z(a,c,b){var d=new Date;d.setTime(d.getTime()+864E5*b);b="expires="+d.toUTCString();document.cookie=a+"="+window.btoa(c)+";"+b+";domain=jobvite.com;path=/"}function L(){d("getVisitorId");var a=JSON.stringify({CustomerId:"12b7ed4d-b2cc-4f7d-9855-4a05a2a26839"});
return N("https://st.fullcircleinsights.com/v1/visitors/create",a).then(JSON.parse)}function v(a){d("m_handleSubmit");var c=null,b=a.currentTarget;a.preventDefault();d("form id: "+b.id);if("pardot-form"===b.id)for(a=0;a<b.childNodes.length;a++)if(b.childNodes[a].classList&&b.childNodes[a].classList.contains("form-field")&&b.childNodes[a].classList.contains("email"))for(var e=0;e<b.childNodes[a].childNodes.length;e++)if("input"==b.childNodes[a].childNodes[e].nodeName.toLowerCase()){e=b.childNodes[a].childNodes[e].id;
d("email field id: "+e);c=b.elements.namedItem(e).value;break}if("elq-form"===b.className||b.action&&b.action.includes("eloqua"))for(e=b.getElementsByTagName("input"),a=0;a<e.length;a++)if("emailAddress"==e[a].name){d("email field id: "+e[a].id);c=e[a].value;break}if(b.id&&"string"===typeof b.id&&0===b.id.indexOf("gform")){e=b.getElementsByTagName("input");for(a=0;a<e.length;a++)if(e[a].parentElement.classList.contains("ginput_container_email")){d("email field id: "+e[a].id);d("email field value: "+
e[a].value);c=e[a].value;break}if(c){setTimeout(function(){k(c)},500);b.submit();return}}b.classList.contains("fcidstform")&&document.getElementById("email")&&b.contains(document.getElementById("email"))&&(c=document.getElementById("email").value);c?window==window.top?h(c):parent.postMessage('{ "sender" : "fcdsc", "type": "setuppendingsave", "email" : "'+c+'"}',"*"):d("could not find email field/value");b.submit()}function T(a){d("m_handleSubmitHS");var c=null,b=null;a=a.target;for(var e=0;e<a.elements.length;e++)"email"===
a.elements[e].name.toLowerCase()&&(c=a.elements[e].value),"hs_context"===a.elements[e].name.toLowerCase()&&(b=JSON.parse(a.elements[e].value));c?b?b.redirectUrl?h(c):setTimeout(function(){k(c)},500):d("could not find hs_context"):d("could not find email field/value")}function n(){d("m_checkForPendingSave");if(window==window.top){var a=E("_fcdsctmp");d("email: "+a);a?(z("_fcdsctmp","",""),k(a)):d("email cookie _fcdsctmp not present, exiting")}else parent.postMessage('{ "sender" : "fcdsc", "type": "checkforpendingsave" }',
"*")}function h(a){d("m_setupPendingSave");z("_fcdsctmp",a,1)}function A(a){d("m_setupPendingMultiSave");z("_fcdscms",a,1)}function H(a,c){d("m_handleSubmitMkto");d("values: "+JSON.stringify(a));d("followUpUrl: "+c);if(!a)return d("Values param is null, exiting."),!0;var b=a.Email;d("email: "+b);if(!b)return d("Email is not in the values param, exiting."),!0;k(b).then(function(a){d("m_handleSubmitMkto success");location.href=c},function(a){d("m_handleSubmitMkto error");location.href=c});return!1}
var G=false,w="email",O=!1;return{init:function(){var a=void 0;a=window.location.href;var c="l".replace(/[\[\]]/g,"\\$&");c=(new RegExp("[?&]"+c+"(=([^&#]*)|&|#|$)")).exec(a);"fcidevqa"===(c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null)&&(G=!0)},isValidOrigin:function(a){return M(a)},trackVisit:function(){l()},getForms:function(){d("getForms");for(var a=0;a<document.forms.length;a++){d("form: "+document.forms[a].id);var c=document.forms[a].classList&&document.forms[a].classList.contains("fcidstform")&&
document.getElementById(w)&&document.forms[a].contains(document.getElementById(w));("elq-form"===document.forms[a].className||document.forms[a].action&&document.forms[a].action.includes("eloqua")||document.forms[a].id&&"string"===typeof document.forms[a].id&&(0===document.forms[a].id.indexOf("pardot-form")||0===document.forms[a].id.indexOf("gform")))&&document.forms[a].addEventListener("submit",fcdsc.handleSubmit,!1);c&&document.getElementById(w).addEventListener("change",fcdsc.handleEmailFieldChange);
if("elq-form"===document.forms[a].className||document.forms[a].action&&document.forms[a].action.includes("eloqua"))for(c=document.forms[a].getElementsByTagName("input"),a=0;a<c.length;a++)if("emailAddress"==c[a].name){d("adding change event listener to email field id: "+c[a].id);c[a].addEventListener("change",fcdsc.handleEmailFieldChange);break}}},handleSubmit:function(a){v(a)},handleSubmitHS:function(a){T(a)},handleEmailFieldChange:function(a){d("m_handleEmailFieldChange");a=a.target.value;d("email: "+
a);/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?O?k(a):window==window.top?h(a):parent.postMessage('{ "sender" : "fcdsc", "type": "setuppendingsave", "email" : "'+a+'"}',"*"):d("Invalid email")},setEmailFieldId:function(a){d("m_setEmailFieldId");a&&(w=a)},setNoRedirect:function(a){d("m_setNoRedirect");"boolean"==typeof a&&(O=a)},handleSubmitMkto:function(a,c){return H(a,c)},receiveMessage:function(a){d("m_receiveMessage");d("event.data: "+a.data);d("event.origin: "+a.origin);if("string"==typeof a.data)try{var c=
JSON.parse(a.data);if(a.data.includes("pageId")){var b=a.data;d("m_handleSubmitUnbounce");var e=b.split("&");a=null;for(b=0;b<e.length;b++){var g=e[b].split("=");"pageId"==g[0].replace(/['"]+/g,"")&&(a=g[1])}if(a){var l=document.getElementsByName("pageId");if(l[0].value==a){var p=l[0].parentElement,m=document.getElementById("email");if(!1===p.contains(m))d("email element is not part of correct form");else if("input"!=m.nodeName.toLowerCase())d("email element is not input, exiting");else{var r=m.value;
r?h(r):d("could not find email field/value")}}}}if(c.sender&&"fcdsc"===c.sender){var t=c.type.toLowerCase();"trackformfill"===t&&k(c.email);"setuppendingsave"===t&&h(c.email);"setuppendingmultisave"===t&&A(c.email);"checkforpendingsave"===t&&n()}}catch(P){d("error in m_receiveMessage: "+P)}},checkForPendingSave:function(){n()},setupPendingSave:function(a){h(a)},setupPendingMultiSave:function(a){A(a)},log:function(a){d(a)}}}();
window.onload=function(){fcdsc.init();fcdsc.isValidOrigin(window.location.hostname)?(fcdsc.getForms(),fcdsc.checkForPendingSave(),window==window.top&&("undefined"!==typeof MktoForms2&&MktoForms2.whenReady(function(l){l.onSuccess(fcdsc.handleSubmitMkto)}),window.addEventListener("message",fcdsc.receiveMessage,!1),window.addEventListener("hsvalidatedsubmit",fcdsc.handleSubmitHS,!1),fcdsc.trackVisit())):console.log("FCDSC: not a valid origin, exiting")};
String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(l,k){pos=0<k?k|0:0;return this.substring(pos,pos+l.length)===l}});String.prototype.includes||(String.prototype.includes=function(l,k){"number"!==typeof k&&(k=0);return k+l.length>this.length?!1:-1!==this.indexOf(l,k)});
(function(l,k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define(k):l.ES6Promise=k()})(this,function(){function l(){return function(){return process.nextTick(p)}}function k(){return"undefined"!==typeof U?function(){U(p)}:x()}function M(){var a=0,b=new P(p),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function K(){var a=new MessageChannel;a.port1.onmessage=p;return function(){return a.port2.postMessage(0)}}
function x(){var a=setTimeout;return function(){return a(p,1)}}function p(){for(var a=0;a<y;a+=2)(0,B[a])(B[a+1]),B[a]=void 0,B[a+1]=void 0;y=0}function S(){try{var a=require("vertx");U=a.runOnLoop||a.runOnContext;return k()}catch(q){return x()}}function d(b,c){var f=arguments,d=this,q=new this.constructor(m);void 0===q[R]&&a(q);var e=d._state;e?function(){var a=f[e-1];r(function(){return w(e,q,a,d._result)})}():A(d,q,b,c);return q}function u(a){if(a&&"object"===typeof a&&a.constructor===this)return a;
var b=new this(m);v(b,a);return b}function m(){}function F(a){try{return a.then}catch(q){return I.error=q,I}}function N(a,b,c,d){try{a.call(b,c,d)}catch(aa){return aa}}function E(a,b,c){r(function(a){var f=!1,d=N(c,b,function(c){f||(f=!0,b!==c?v(a,c):n(a,c))},function(b){f||(f=!0,h(a,b))},"Settle: "+(a._label||" unknown promise"));!f&&d&&(f=!0,h(a,d))},a)}function z(a,b){b._state===J?n(a,b._result):b._state===C?h(a,b._result):A(b,void 0,function(b){return v(a,b)},function(b){return h(a,b)})}function L(a,
b,c){b.constructor===a.constructor&&c===d&&b.constructor.resolve===u?z(a,b):c===I?(h(a,I.error),I.error=null):void 0===c?n(a,b):"function"===typeof c?E(a,b,c):n(a,b)}function v(a,b){if(a===b)h(a,new TypeError("You cannot resolve a promise with itself"));else{var c=typeof b;null===b||"object"!==c&&"function"!==c?n(a,b):L(a,b,F(b))}}function T(a){a._onerror&&a._onerror(a._result);H(a)}function n(a,b){a._state===D&&(a._result=b,a._state=J,0!==a._subscribers.length&&r(H,a))}function h(a,b){a._state===
D&&(a._state=C,a._result=b,r(T,a))}function A(a,b,c,d){var f=a._subscribers,e=f.length;a._onerror=null;f[e]=b;f[e+J]=c;f[e+C]=d;0===e&&a._state&&r(H,a)}function H(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,f,e=a._result,g=0;g<b.length;g+=3)d=b[g],f=b[g+c],d?w(c,d,f,e):f(e);a._subscribers.length=0}}function G(){this.error=null}function w(a,b,c,d){var e="function"===typeof c,f=void 0,q=void 0,g=void 0,Q=void 0;if(e){try{f=c(d)}catch(ba){W.error=ba,f=W}f===W?(Q=!0,q=f.error,f.error=
null):g=!0;if(b===f){h(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,g=!0;b._state===D&&(e&&g?v(b,f):Q?h(b,q):a===J?n(b,f):a===C&&h(b,f))}function O(a,b){try{b(function(b){v(a,b)},function(b){h(a,b)})}catch(Q){h(a,Q)}}function a(a){a[R]=X++;a._state=void 0;a._result=void 0;a._subscribers=[]}function c(b,c){this._instanceConstructor=b;this.promise=new b(m);this.promise[R]||a(this.promise);g(c)?(this._remaining=this.length=c.length,this._result=Array(this.length),
0===this.length?n(this.promise,this._result):(this.length=this.length||0,this._enumerate(c),0===this._remaining&&n(this.promise,this._result))):h(this.promise,Error("Array Methods must be provided an Array"))}function b(a){this[R]=X++;this._result=this._state=void 0;this._subscribers=[];if(m!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof b)O(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}var e=void 0,g=e=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},y=0,U=void 0,V=void 0,r=function(a,b){B[y]=a;B[y+1]=b;y+=2;2===y&&(V?V(p):Y())},t=(e="undefined"!==typeof window?window:void 0)||{},P=t.MutationObserver||t.WebKitMutationObserver;t="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process);var ca="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==
typeof MessageChannel,B=Array(1E3),Y=void 0;Y=t?l():P?M():ca?K():void 0===e&&"function"===typeof require?S():x();var R=Math.random().toString(36).substring(16),D=void 0,J=1,C=2,I=new G,W=new G,X=0;c.prototype._enumerate=function(a){for(var b=0;this._state===D&&b<a.length;b++)this._eachEntry(a[b],b)};c.prototype._eachEntry=function(a,c){var e=this._instanceConstructor,f=e.resolve;f===u?(f=F(a),f===d&&a._state!==D?this._settledAt(a._state,c,a._result):"function"!==typeof f?(this._remaining--,this._result[c]=
a):e===b?(e=new e(m),L(e,a,f),this._willSettleAt(e,c)):this._willSettleAt(new e(function(b){return b(a)}),c)):this._willSettleAt(f(a),c)};c.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===D&&(this._remaining--,a===C?h(d,c):this._result[b]=c);0===this._remaining&&n(d,this._result)};c.prototype._willSettleAt=function(a,b){var c=this;A(a,void 0,function(a){return c._settledAt(J,b,a)},function(a){return c._settledAt(C,b,a)})};b.all=function(a){return(new c(this,a)).promise};b.race=
function(a){var b=this;return g(a)?new b(function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};b.resolve=u;b.reject=function(a){var b=new this(m);h(b,a);return b};b._setScheduler=function(a){V=a};b._setAsap=function(a){r=a};b._asap=r;b.prototype={constructor:b,then:d,"catch":function(a){return this.then(null,a)}};b.polyfill=function(){var a=void 0;if("undefined"!==typeof global)a=global;else if("undefined"!==
typeof self)a=self;else try{a=Function("return this")()}catch(Z){throw Error("polyfill failed because global object is unavailable in this environment");}var c=a.Promise;if(c){var d=null;try{d=Object.prototype.toString.call(c.resolve())}catch(Z){}if("[object Promise]"===d&&!c.cast)return}a.Promise=b};b.Promise=b;b.polyfill();return b});